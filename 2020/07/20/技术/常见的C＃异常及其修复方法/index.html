<!DOCTYPE html>












  


<html class="theme-next pisces use-motion" lang="en">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">






















<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">

<link rel="stylesheet" href="/css/main.css?v=7.1.2">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.1.2">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.1.2">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.1.2">


  <link rel="mask-icon" href="/images/logo.svg?v=7.1.2" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '7.1.2',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="常见的C＃异常及其修复方法如果您今天是依靠编写的软件来谋生，那么您可能至少对异常的概念很熟悉。 Jeff Atwood曾经称它们为“现代编程语言的基础”。异常是现代软件开发中常见且有用的结构，但有时它们也可能造成混乱。 那么什么是异常？更具体地说，C＃异常的主要类型是什么，以及如何使用它们？ 今天的帖子将回答上述问题以及更多问题。我们将从“异常”的简要定义开始，然后继续解释该结构的组成部分。最后，">
<meta name="keywords" content="技术">
<meta property="og:type" content="article">
<meta property="og:title" content="常见的C＃异常及其修复方法">
<meta property="og:url" content="http://techq.xyz/2020/07/20/技术/常见的C＃异常及其修复方法/index.html">
<meta property="og:site_name" content="xiyuan技术圈">
<meta property="og:description" content="常见的C＃异常及其修复方法如果您今天是依靠编写的软件来谋生，那么您可能至少对异常的概念很熟悉。 Jeff Atwood曾经称它们为“现代编程语言的基础”。异常是现代软件开发中常见且有用的结构，但有时它们也可能造成混乱。 那么什么是异常？更具体地说，C＃异常的主要类型是什么，以及如何使用它们？ 今天的帖子将回答上述问题以及更多问题。我们将从“异常”的简要定义开始，然后继续解释该结构的组成部分。最后，">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2021-04-25T11:04:00.924Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="常见的C＃异常及其修复方法">
<meta name="twitter:description" content="常见的C＃异常及其修复方法如果您今天是依靠编写的软件来谋生，那么您可能至少对异常的概念很熟悉。 Jeff Atwood曾经称它们为“现代编程语言的基础”。异常是现代软件开发中常见且有用的结构，但有时它们也可能造成混乱。 那么什么是异常？更具体地说，C＃异常的主要类型是什么，以及如何使用它们？ 今天的帖子将回答上述问题以及更多问题。我们将从“异常”的简要定义开始，然后继续解释该结构的组成部分。最后，">





  
  
  <link rel="canonical" href="http://techq.xyz/2020/07/20/技术/常见的C＃异常及其修复方法/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>常见的C＃异常及其修复方法 | xiyuan技术圈</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">xiyuan技术圈</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">溪源的技术博客，技术的不断进取之路</p>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>Home</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-技术">

    
    
    
      
    

    

    <a href="/categories/技术/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>技术</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-随笔">

    
    
    
      
    

    

    <a href="/categories/随笔/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>随笔</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-读书">

    
    
    
      
    

    

    <a href="/categories/读书/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>读书</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-管理">

    
    
    
      
    

    

    <a href="/categories/管理/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>管理</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-归档">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archives"></i> <br>归档</a>

  </li>

      
      
    </ul>
  

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://techq.xyz/2020/07/20/技术/常见的C＃异常及其修复方法/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="溪源">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xiyuan技术圈">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">常见的C＃异常及其修复方法

              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2020-07-20 21:05:00" itemprop="dateCreated datePublished" datetime="2020-07-20T21:05:00+00:00">2020-07-20</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2021-04-25 11:04:00" itemprop="dateModified" datetime="2021-04-25T11:04:00+00:00">2021-04-25</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/技术/" itemprop="url" rel="index"><span itemprop="name">技术</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="常见的C＃异常及其修复方法"><a href="#常见的C＃异常及其修复方法" class="headerlink" title="常见的C＃异常及其修复方法"></a>常见的C＃异常及其修复方法</h1><p>如果您今天是依靠编写的软件来谋生，那么您可能至少对异常的概念很熟悉。</p>
<p>Jeff Atwood曾经称它们为“现代编程语言的基础”。<a href="https://raygun.com/blog/java-exceptions-terminology/" target="_blank" rel="noopener">异常</a>是现代软件开发中常见且有用的结构，但有时它们也可能造成混乱。</p>
<p>那么什么<em>是</em>异常？更具体地说，C＃异常的主要类型是什么，以及如何使用它们？</p>
<p>今天的帖子将回答上述问题以及更多问题。我们将从“异常”的简要定义开始，然后继续解释该结构的组成部分。最后，我们将概述最常见的C＃异常以及如何处理它们。</p>
<p>让我们开始吧。</p>
<h2 id="有什么异常？"><a href="#有什么异常？" class="headerlink" title="有什么异常？"></a>有什么异常？</h2><p>异常是一种可用于处理错误的机制。就这么简单。在某些情况下，例如，C程序员将返回错误代码，而<a href="https://raygun.com/blog/java-exceptions-terminology/" target="_blank" rel="noopener">Java</a>或C＃程序员都很有可能引发异常。</p>
<p>异常表示执行流程的突然中断。一旦引发异常，执行就会停止。如果未处理异常，则应用程序崩溃。</p>
<p>但是，实际上您是如何做到的呢？您如何引发或捕获异常？所有这些甚至意味着什么？</p>
<p>这就是我们将在下一部分中详细介绍的内容。</p>
<h2 id="C＃异常剖析"><a href="#C＃异常剖析" class="headerlink" title="C＃异常剖析"></a>C＃异常剖析</h2><p>现在，我们将简要介绍C＃异常的情况。您将了解应该使用的主要关键字，这些关键字不仅可以捕获和处理异常，还可以抛出自己的异常。我们列表上的第一个是<code>try</code>关键字和块。</p>
<h3 id="try"><a href="#try" class="headerlink" title="try"></a>try</h3><p>异常处理解剖的第一部分是<code>try</code>块。您可以使用它来尝试执行一些可能引发异常的代码。考虑以下代码摘录：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">string content = string.Empty;</span><br><span class="line">try</span><br><span class="line">&#123;</span><br><span class="line">    content = System.IO.File.ReadAllText(@&quot;C:\file.txt&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上面的代码声明了一个变量，并为其分配了空字符串。然后，我们有了<code>try</code>块。块中的单行代码<code>try</code>使用该类中的<code>ReadAllText</code>静态方法<code>System.IO.File</code>。我们担心该路径表示的文件可能不存在，在这种情况下会引发异常。但是，当然，这还不够。我们的代码不执行任何处理异常的操作。它甚至目前还没有编译！这是来自编译器的消息：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Expected catch or finally</span><br></pre></td></tr></table></figure>

<p>该消息是不言自明的。我们需要 <code>catch</code>或<code>finally</code>代码块，因为尝试处理异常然后忘记执行处理部分没有任何意义。让我们开始吧。</p>
<h3 id="catch"><a href="#catch" class="headerlink" title="catch"></a>catch</h3><p><code>catch</code>代码块使我们能够实际处理异常。我们将使用更多代码扩展前面的示例。</p>
<p>看看这个：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">static void Main(string[] args)</span><br><span class="line">&#123;</span><br><span class="line">    string content = string.Empty;</span><br><span class="line"></span><br><span class="line">    try</span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(&quot;First message inside try block.&quot;);</span><br><span class="line">        Console.WriteLine(&quot;Second message inside try block.&quot;);</span><br><span class="line">        content = System.IO.File.ReadAllText(@&quot;C:\file.txt&quot;);</span><br><span class="line">        Console.WriteLine(&quot;Third message inside try block. This shouldn&apos;t be printed.&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    catch</span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(&quot;First message inside the catch block.&quot;);</span><br><span class="line">        Console.WriteLine(&quot;Second message inside the catch block.&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Console.WriteLine(&quot;Outside the try-catch.&quot;);</span><br><span class="line">    Console.ReadLine();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果运行上面的代码，则应看到以下内容：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">First message inside try block.</span><br><span class="line">Second message inside try block.</span><br><span class="line">First message inside the catch block.</span><br><span class="line">Second message inside the catch block.</span><br><span class="line">Outside try-catch.</span><br></pre></td></tr></table></figure>

<p>该路径处的文件不存在，因此将引发<code>System.FileNotFoundException</code>。发生这种情况时，执行流程将立即中断。因此，将在try块中打印“第三条消息”的行。这不应该被打印。” 永远不会被执行。</p>
<p>执行流程由<code>catch</code>块执行。完成后，将控制权交还给main方法，然后打印<code>Outside try-catch</code>。并等待用户输入。</p>
<h3 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h3><p>在了解了<code>try</code>和之后<code>catch</code>，我们终于（没有双关语）准备好使用这个非常有用但经常被误解的异常处理机制的一部分。那么，什么是<code>finally</code>？</p>
<p>该<code>finally</code>块是一种确保将执行给定代码段的方式，无论是否引发异常。考虑下面的代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">try</span><br><span class="line">&#123;</span><br><span class="line">    content = System.IO.File.ReadAllText(path);</span><br><span class="line">    Console.WriteLine(&quot;If you&apos;re reading this, no exception was thrown.&quot;);</span><br><span class="line">&#125;</span><br><span class="line">catch (System.IO.FileNotFoundException e)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(&quot;If you&apos;re reading this, an exception was thrown.&quot;);</span><br><span class="line">    Console.WriteLine(&quot;Message: &quot; + e.Message);</span><br><span class="line">&#125;</span><br><span class="line">finally</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(&quot;This will be printed, no matter what.&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>那仍然是相同的示例，但是现在要简单得多。注意最后的<code>finally</code>块。如果运行此代码，则应该看到以下消息：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">If you&apos;re reading this, an exception was thrown.</span><br><span class="line">Message: Could not find file &apos;C:\file.txt&apos;.</span><br><span class="line">This will be printed, no matter what.</span><br><span class="line">Outside the try-catch.</span><br></pre></td></tr></table></figure>

<p>现在让我们模拟文件的存在。注释掉试图从文件中读取的行，然后再次运行该应用程序。这是您现在应该看到的：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">If you&apos;re reading this, no exception was thrown.</span><br><span class="line">This will be printed, no matter what.</span><br><span class="line">Outside the try-catch.</span><br></pre></td></tr></table></figure>

<p>如您所见，在最近的场景中，没有引发异常，因此该<code>catch</code>块中没有执行任何行。另一方面，<code>finally</code>在两种情况下都执行了该块。</p>
<h3 id="throw"><a href="#throw" class="headerlink" title="throw"></a>throw</h3><p>当涉及到异常时，您将不会总是从别人那里处理它们。您也可以自己抛出异常。为此，您将使用<code>throw</code>关键字，然后是要引发的异常的类的实例化。以下代码举例说明了这一点：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public ProductService(IProductRepository repository)</span><br><span class="line">&#123;</span><br><span class="line">    if (repository == null)</span><br><span class="line">        throw new ArgumentNullException();</span><br><span class="line"></span><br><span class="line">    this.repository = repository;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="常见的-NET异常"><a href="#常见的-NET异常" class="headerlink" title="常见的.NET异常"></a>常见的.NET异常</h2><p>以下是常见的.NET异常列表：</p>
<h3 id="System-NullReferenceException"><a href="#System-NullReferenceException" class="headerlink" title="System.NullReferenceException"></a>System.NullReferenceException</h3><p>这是最著名的（甚至是臭名昭著的）异常之一。当您尝试调用方法/属性/索引器/等时，抛出此异常。在包含空引用的变量（即，它不指向任何对象）。下面的代码将导致空引用异常：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Person p = people.Where(x =&gt; x.SSN == verifySsn).FirstOrDefault();</span><br><span class="line">string name = p.Name;</span><br></pre></td></tr></table></figure>

<p>在上面的示例中，我们过滤了将每个项目的SSN属性与<code>verifySsnvariable</code>变量进行比较的序列。然后，我们使用该<code>FirstOrDefault()</code>方法从序列中仅提取第一项。如果序列不产生任何项目，则它将返回该类型的默认值。由于<code>Person</code>是引用类型，因此其返回值为null。</p>
<p>在下一行，我们尝试<code>Name</code>在空引用上取消引用属性。<em>繁荣！</em>空引用异常。</p>
<p>这是通常不抛出也不捕获的异常。您不要扔它，因为它毫无意义。如果您想与代码的客户交流，给定方法不接受null作为其参数的有效值，则使用的正确异常是<code>System.ArgumentNullException</code>。</p>
<p>您如何“修复”此异常？简而言之，您必须对可为空性小心谨慎。如果您正在编写将由第三方使用的任何代码（即使这些第三方是您的同事），则请认真考虑是否接受空引用作为有效值。</p>
<p>无论您做出什么决定，都必须使该决定非常明确并记录在案。您可以通过抛出<code>System.ArgumentNullException</code>，例如，并在方法上使用XML文档标题来实现。</p>
<h3 id="System-IndexOutOfRangeException"><a href="#System-IndexOutOfRangeException" class="headerlink" title="System.IndexOutOfRangeException"></a>System.IndexOutOfRangeException</h3><p>在应用程序代码通常不会抛出或捕获该异常的意义上，该异常与上一个异常类似。</p>
<p>那为什么呢？</p>
<p>好吧，当您尝试使用无效的索引值访问数组，列表或任何可索引序列中的元素时，将引发此异常。一个简单的例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public static void PrintUrlSufix(string url)</span><br><span class="line">&#123;</span><br><span class="line">    var parts = url.Split(&apos;.&apos;);</span><br><span class="line">    Console.WriteLine(parts[2]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上面的代码显然希望使用<strong><a href="http://www.acme.com" target="_blank" rel="noopener">www.acme.com</a></strong>格式的URL 。但是，如果只是获得<strong>acme.com</strong>怎么办？为此，如果得到<strong>Hakuna Matata</strong>怎么办？是的，没错：<code>System.IndexOutOfBoundException</code>是的。</p>
<p>您如何避免遇到此异常？永远不要把事情视为理所当然。永远不要仅仅假设数据将采用正确的格式。做您的尽职调查和检查的东西。</p>
<h3 id="System-IO-IOException"><a href="#System-IO-IOException" class="headerlink" title="System.IO.IOException"></a>System.IO.IOException</h3><p>此C＃异常具有一个不言自明的名称。这正是您的想法：这是IO操作期间发生错误时引发的异常。与前两个异常不同，您可能会发现自己不时捕捉或抛出其中一个。</p>
<p>本<code>IOException</code>类实际上是一些更具体的异常，例如：</p>
<ul>
<li>DirectoryNotFoundException</li>
<li>EndOfStreamException</li>
<li>FileNotFoundException</li>
<li>FileLoadException</li>
<li>PathTooLongException</li>
</ul>
<p>有关的文档，<code>IOException</code>建议您尽可能使用更具体的异常，而不是更一般的异常。</p>
<h3 id="System-Net-WebException"><a href="#System-Net-WebException" class="headerlink" title="System.Net.WebException"></a>System.Net.WebException</h3><p>此异常与网络有关。如果使用<a href="https://docs.microsoft.com/dotnet/framework/network-programming/introducing-pluggable-protocols" target="_blank" rel="noopener">可插拔协议</a>访问网络时发生错误，则抛出该错误<a href="https://docs.microsoft.com/dotnet/framework/network-programming/introducing-pluggable-protocols" target="_blank" rel="noopener">。</a>处理此异常时，请记住验证该<code>Response</code>属性，该属性将包含远程主机返回的响应。</p>
<h3 id="System-Data-SqlClient-SqlException"><a href="#System-Data-SqlClient-SqlException" class="headerlink" title="System.Data.SqlClient.SqlException"></a>System.Data.SqlClient.SqlException</h3><p>此异常与数据库（特别是SQL Server）有关。SQL Server返回错误或警告时将引发该错误。该类具有一个称为的属性<code>Errors</code>，该属性是一个包含<code>SqlError</code>该类的一个或多个实例的集合。依次包含有关发生的错误的详细信息。</p>
<h3 id="System-StackOverflowException"><a href="#System-StackOverflowException" class="headerlink" title="System.StackOverflowException"></a>System.StackOverflowException</h3><p>当执行堆栈溢出时，抛出此异常，这通常意味着递归出错。该代码有太多的嵌套方法调用。事情就是这样：这个异常是无法捕获的-至少从.NET 2.0起就没有-这意味着当抛出该异常时，您几乎没有其他选择。默认情况下，您的过程将被终止。</p>
<p>您应该做的而不是捕获此异常的方法是编写代码，以防止它首先发生。</p>
<h3 id="System-OutOfMemoryException"><a href="#System-OutOfMemoryException" class="headerlink" title="System.OutOfMemoryException"></a>System.OutOfMemoryException</h3><p>可以说这是<a href="https://stackoverflow.com/questions/1153702/system-outofmemoryexception-was-thrown-when-there-is-still-plenty-of-memory-fr" target="_blank" rel="noopener">最令人困惑的C＃异常之一</a>。网上有很多资源<a href="https://blogs.msdn.microsoft.com/ericlippert/2009/06/08/out-of-memory-does-not-refer-to-physical-memory/" target="_blank" rel="noopener">可以很好地阐明问题</a>，但是我将在此处提供一个简短的版本。发生的情况是此异常不涉及可用的物理内存。</p>
<p>那么，什么时候抛出此异常？</p>
<p>您知道何时要停车吗，因为其他驾驶员未正确停车而不能停车吗？如果您只需在停放的汽车之间添加所有可用空间，就足以容纳您的车辆。但是目前不可能，因为它不是连续的区域。</p>
<p>当您获得此内存时，这差不多发生了什么。可能有很多可用的总内存，但是没有连续的部分可以满足所需的分配。实际上，例如，如果您尝试将 <code>StringBuilder</code>的<code>MaxCapacity</code>属性扩展到该属性之外，则会发生此异常。</p>
<h3 id="System-InvalidCastException"><a href="#System-InvalidCastException" class="headerlink" title="System.InvalidCastException"></a>System.InvalidCastException</h3><p>此异常也具有不言自明的名称。当代码由于未定义强制类型转换而无法从一种类型转换为另一种类型时，将引发该错误。以下代码将引发此类型的异常：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">object o = &quot;10&quot;;</span><br><span class="line">int x = (int)o;</span><br></pre></td></tr></table></figure>

<p>这是您通常不会捕获的异常。相反，您将以不会发生的方式编写代码。例如，以下代码在尝试强制类型转换之前进行类型检查：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public override bool Equals (object obj )</span><br><span class="line">&#123;</span><br><span class="line">   if (!obj is Foo)</span><br><span class="line">       return false;</span><br><span class="line"></span><br><span class="line">   Foo other = (Foo)obj;</span><br><span class="line">   return this.bar == other.bar;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上面的代码可以使用简化的<a href="https://docs.microsoft.com/dotnet/csharp/language-reference/keywords/as" target="_blank" rel="noopener"><code>as</code>操作符</a>，在这里我没有进一步具体说明，作为一个练习留给读者。无论如何，这就是问题：您实际上应该尝试做的是避免问题，而不是首先进行转换。利用泛型来防止陷入需要强制转换的情况。</p>
<h3 id="System-InvalidOperationException"><a href="#System-InvalidOperationException" class="headerlink" title="System.InvalidOperationException"></a>System.InvalidOperationException</h3><p>像之前的许多其他异常一样，这种异常通常是您不会发现的。相反，您应该做的是编写不会发生的代码。考虑以下示例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var numbers = new List&lt;int&gt; &#123; 1, 3, 5 &#125;;</span><br><span class="line">var firstGreaterThanFive = numbers.Where(x =&gt; x &gt; 5).First();</span><br></pre></td></tr></table></figure>

<p>当序列不产生任何结果时，将抛出First LINQ扩展方法。如果您知道该序列有时可能不会产生结果-没关系-您应该改用FirstOrDefault。在空序列上调用此方法时，将返回序列类型的默认值，而不是抛出异常。</p>
<h3 id="System-ObjectDisposedException"><a href="#System-ObjectDisposedException" class="headerlink" title="System.ObjectDisposedException"></a>System.ObjectDisposedException</h3><p>我们将在这篇文章中介绍的最后一个C＃异常也属于“不应该处理，请修复代码”类别。换句话说，这是开发人员错误。当您尝试使用已处理的<a href="https://docs.microsoft.com/dotnet/api/system.idisposable?view=netframework-4.7.2" target="_blank" rel="noopener">IDisposable</a>进行操作时，将引发此异常。</p>
<p>此当通常发生在开发者调用<code>Dispose</code>，<code>Close</code>或其它类似方法和后来试图访问该对象的一个成员时。</p>
<h2 id="如何成功的进行异常处理？"><a href="#如何成功的进行异常处理？" class="headerlink" title="如何成功的进行异常处理？"></a>如何成功的进行异常处理？</h2><p>错误处理是软件开发教学中经常被忽略的话题，出现异常有时非常不幸。如果没有可靠的<a href="https://raygun.com/blog/errors-and-exceptions/" target="_blank" rel="noopener">错误处理策略</a>，您的应用程序将永远是劣等的。</p>
<p>通过本文，我们希望通过定义异常的概念并对C＃异常的主要类型进行快速概述，以帮助解决该问题。但本文并没有涵盖异常处理的全部。恰好相反，我认为这是一个机会，可以开始引导您对该主题的学习，并且永不停止学习和练习。</p>
<p>祝您能想出一种对您的应用程序有效的策略！</p>

      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      
        
          
        
        <div class="post-tags">
          
            <a href="/tags/技术/" rel="tag"># 技术</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2020/07/19/技术/how-to-use-abp-part2-compare-with-three-layers/" rel="next" title="如何使用ABP进行软件开发（2）三层架构与领域驱动设计的对比">
                <i class="fa fa-chevron-left"></i> 如何使用ABP进行软件开发（2）三层架构与领域驱动设计的对比
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2020/07/20/技术/ASP.NET Core中的内存中缓存/" rel="prev" title="ASP.NET Core中的内存中缓存">
                ASP.NET Core中的内存中缓存 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">溪源</p>
              <div class="site-description motion-element" itemprop="description"></div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives">
                
                    <span class="site-state-item-count">81</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">4</span>
                    <span class="site-state-item-name">categories</span>
                  
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">4</span>
                    <span class="site-state-item-name">tags</span>
                  
                </div>
              
            </nav>
          

          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://www.cnblogs.com/xiyuanmore" title="博客园 &rarr; https://www.cnblogs.com/xiyuanmore" rel="noopener" target="_blank"><i class="fa fa-fw fa-博客园"></i>博客园</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://blog.csdn.net/farway000" title="CSDN &rarr; https://blog.csdn.net/farway000" rel="noopener" target="_blank"><i class="fa fa-fw fa-CSDN"></i>CSDN</a>
                </span>
              
            </div>
          

          

          
          

          
            
          
          

        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#常见的C＃异常及其修复方法"><span class="nav-number">1.</span> <span class="nav-text">常见的C＃异常及其修复方法</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#有什么异常？"><span class="nav-number">1.1.</span> <span class="nav-text">有什么异常？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#C＃异常剖析"><span class="nav-number">1.2.</span> <span class="nav-text">C＃异常剖析</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#try"><span class="nav-number">1.2.1.</span> <span class="nav-text">try</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#catch"><span class="nav-number">1.2.2.</span> <span class="nav-text">catch</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#最后"><span class="nav-number">1.2.3.</span> <span class="nav-text">最后</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#throw"><span class="nav-number">1.2.4.</span> <span class="nav-text">throw</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#常见的-NET异常"><span class="nav-number">1.3.</span> <span class="nav-text">常见的.NET异常</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#System-NullReferenceException"><span class="nav-number">1.3.1.</span> <span class="nav-text">System.NullReferenceException</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#System-IndexOutOfRangeException"><span class="nav-number">1.3.2.</span> <span class="nav-text">System.IndexOutOfRangeException</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#System-IO-IOException"><span class="nav-number">1.3.3.</span> <span class="nav-text">System.IO.IOException</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#System-Net-WebException"><span class="nav-number">1.3.4.</span> <span class="nav-text">System.Net.WebException</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#System-Data-SqlClient-SqlException"><span class="nav-number">1.3.5.</span> <span class="nav-text">System.Data.SqlClient.SqlException</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#System-StackOverflowException"><span class="nav-number">1.3.6.</span> <span class="nav-text">System.StackOverflowException</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#System-OutOfMemoryException"><span class="nav-number">1.3.7.</span> <span class="nav-text">System.OutOfMemoryException</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#System-InvalidCastException"><span class="nav-number">1.3.8.</span> <span class="nav-text">System.InvalidCastException</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#System-InvalidOperationException"><span class="nav-number">1.3.9.</span> <span class="nav-text">System.InvalidOperationException</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#System-ObjectDisposedException"><span class="nav-number">1.3.10.</span> <span class="nav-text">System.ObjectDisposedException</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#如何成功的进行异常处理？"><span class="nav-number">1.4.</span> <span class="nav-text">如何成功的进行异常处理？</span></a></li></ol></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2021</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">溪源</span>

  

  
</div>


  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.9.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.1.2</div>
#<div><a href="http://www.beian.miit.gov.cn/">ICP备案号:湘ICP备19001531号-2</a></div>



        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=3.4.1"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/utils.js?v=7.1.2"></script>

  <script src="/js/motion.js?v=7.1.2"></script>



  
  


  <script src="/js/affix.js?v=7.1.2"></script>

  <script src="/js/schemes/pisces.js?v=7.1.2"></script>



  
  <script src="/js/scrollspy.js?v=7.1.2"></script>
<script src="/js/post-details.js?v=7.1.2"></script>



  


  <script src="/js/next-boot.js?v=7.1.2"></script>


  

  

  

  


  


  




  

  

  

  

  

  

  

  

  

  

  

  

  

  

</body>
</html>
